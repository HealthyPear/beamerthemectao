\ProvidesPackage{beamerouterthemectao}[2024/04/29 Unofficial CTAO beamer theme]

\RequirePackage{pgfopts}

\pgfkeys{
  /ctaotheme/outer/numbering/.cd,
    .is choice,
    none/.code=\setbeamertemplate{frame numbering}[none],
    counter/.code=\setbeamertemplate{frame numbering}[counter],
    fraction/.code=\setbeamertemplate{frame numbering}[fraction],
}


% frame numbering. None, number, number / total
\defbeamertemplate*{frame numbering}{counter}{\insertframenumber}
\defbeamertemplate{frame numbering}{none}{}
\defbeamertemplate{frame numbering}{fraction}{%
  \insertframenumber/\inserttotalframenumber
}

\defbeamertemplate*{frame footer}{default}{
  \usebeamerfont{author in head/foot}%
  \usebeamercolor[fg]{author in head/foot}%
  \insertshortauthor{} | \insertshortdate{}%
}

% structure
\newlength{\@headsep}
\setlength{\@headsep}{5pt}
\setbeamertemplate{headline}{
  \vspace{\@headsep}%
  \leavevmode%
  \hspace{\@headsep}%
  \begin{beamercolorbox}[
    wd=\dimexpr 0.7\paperwidth - \@headsep \relax,
    ht=0.7cm,
    left,
  ]{headline}%
    \vbox to 0.7cm {%
      \usebeamerfont{section in head/foot}%
      \let\hyperlink\@secondoftwo% just print section, create no link
      \insertsectionhead%
      \vfil%
    }%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[
    wd=\dimexpr 0.3\paperwidth - \@headsep \relax,
    ht=0.7cm,
    right,
  ]{headline}%
    \hfill\includegraphics[height=0.7cm]{\@headline@logo}%
  \end{beamercolorbox}%
  \hspace{\@headsep}%
  \vskip\@headsep%
}

\setbeamertemplate{footline}{%
  \begin{beamercolorbox}[wd=\textwidth, sep=3ex]{footline}%
    \usebeamertemplate*{frame footer}
    \hfill
    \usebeamercolor[fg]{page number in head/foot}%
    \usebeamertemplate*{frame numbering}
  \end{beamercolorbox}%
}
